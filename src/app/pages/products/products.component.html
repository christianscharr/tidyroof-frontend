<oho-navbar></oho-navbar>
<div class="img-wrapper">
  <img *ngIf="product" [src]="product.image" alt="">
  <div class="information">
    <span class="price">{{ product?.price?.toFixed(2) }} Fr.</span>
    <h1>{{ product?.name }}</h1>
    <h2>{{ product?.description }}</h2>
    <span class="ingredients"><i class="fal fa-clipboard-list"></i> <p>{{ product?.ingredients }}</p></span>
    <div class="allergens">
      <i class="fal fa-allergies"></i>
      <div *ngIf="product?.allergens.length > 0; else noAllergens">
        <p>Dieses Produkt enthält Allergene. Eine Übersicht darüber erhalten Sie in der Sektion "Gesundheit".</p>
      </div>
      <ng-template #noAllergens>
        <div style="margin-right: 10px;">
          <p>Dieses Produkt enthält keine Allergene.</p>
        </div>
      </ng-template>
    </div>
    <div class="categories">
      <i class="fal fa-bookmark"></i>
      <div class="cat">
        <mat-chip-list class="chips">
          <mat-chip
            *ngFor="let category of product?.categories"
            color="secondary">
          {{ category.name }}
          </mat-chip>
        </mat-chip-list>
      </div>
    </div>
    <span class="health">
      <i class="fal fa-heartbeat"></i>Gesundheit
    </span>
    <p>Im Pordukt enthaltene Allergene (für Sie kritische, werden rot gekennzeichnet)</p>
    <div *ngFor="let allergen of product?.allergens">
      <p *ngIf="isInAllergen(allergen.code); else notInAllergen" class="is-in-allergen">{{ allergen.name }}</p>
      <ng-template #notInAllergen>
        <p>{{ allergen.name }}</p>
      </ng-template>
    </div>
    <p *ngIf="product?.allergens.length === 0" class="safe">Dieses Produkt enthält keinerlei Allergene.</p>
    <span class="health-check">Health Check</span>
    <p>
      Beim Health Check, beurteilen wir, wie Gesund ein Produkt ist. Dazu benutzen wir einen Richtwert, der vom WHO definiert wurde.
      Wir gehen beim Health Check vom Salz und Zucker Gehalt aus.
    </p>
    <a href="https://www.who.int/mediacentre/infographic/salt-reduction/en/" target="_blank" class="health-check-link"><i class="fal fa-arrow-right"></i>Zum WHO Artikel</a>
    <div class="check">
      <div class="salt-level">
        <p>Salz Level</p>
        <i class="fal fa-check-circle checkmark" *ngIf="product?.healthySalt"></i>
        <i class="fal fa-exclamation-circle exclamation" *ngIf="!product?.healthySalt"></i>
      </div>
      <div class="sugar-level">
        <p>Zucker Level</p>
        <i class="fal fa-check-circle checkmark" *ngIf="product?.healthySugar"></i>
        <i class="fal fa-exclamation-circle exclamation" *ngIf="!product?.healthySugar"></i>
      </div>
    </div>
    <span class="legend-check"><i class="fal fa-check-circle checkmark"></i> Produkt ist unter dem WHO Wert</span>
    <span class="legend-exclamation"><i class="fal fa-exclamation-circle exclamation"></i> Produkt ist über dem WHO Wert daher mit Vorsicht geniessen</span>
    <span class="recommendations">
      <i class="fal fa-salad"></i>Empfohlene Produkte
    </span>
    <p>
      Vergleichbare Produkte welche keine für Sie relevanten Allergene enthalten:
    </p>
    <div>
      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Produkte
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-card *ngFor="let recommendation of recommendations" (click)="switchToProduct(recommendation.id)" class="card-product">
            <mat-card-header>
              <img style="width: 50px" src="{{recommendation.image.original}}" [alt]="recommendation.name">
              <mat-card-title>{{recommendation.name}}<br></mat-card-title>
              <mat-card-subtitle *ngIf="recommendation.description; else noDescription">{{recommendation.description?.text}}</mat-card-subtitle>
              <ng-template #noDescription>
                <mat-card-subtitle>Keine Beschreibung</mat-card-subtitle>
              </ng-template>
            </mat-card-header>
          </mat-card>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
</div>
